---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";

import BaseLayout from "@layouts/BaseLayout.astro";
import type { CollectionEntry } from "astro:content";
import workyScreenshot1 from "@assets/images/worky-screenshot-1.png";
import roamrScreenshot1 from "@assets/images/roamr-screenshot-1.webp";
import bassetaScreenshot1 from "@assets/images/basseta-screenshot-1.png";
import profilePicture from "@assets/images/profile-picture.jpg";

import emailIcon from "@assets/icons/mdi_email.svg?raw";
import linkedinIcon from "@assets/icons/mdi_linkedin.svg?raw";
import twitterIcon from "@assets/icons/mdi_twitter.svg?raw";
import githubIcon from "@assets/icons/mdi_github.svg?raw";

const posts: CollectionEntry<"blog">[] = await getCollection("blog");

posts.sort(
  (a, b) =>
    new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
);

const social = [
  {
    name: "Email",
    link: "mailto:kenneth.quintero@betweenframes.net",
    icon: emailIcon,
  },
  {
    name: "LinkedIn",
    link: "https://www.linkedin.com/in/kenneth-de-guadalupe-quintero-valles-1971a12a8/",
    icon: linkedinIcon,
  },
  {
    name: "X",
    link: "https://x.com/cin4ed",
    icon: twitterIcon,
  },
  {
    name: "GitHub",
    link: "https://github.com/cin4ed",
    icon: githubIcon,
  },
];

const projects = [
  {
    title: "Worky",
    description: "mac OS desktop organizer.",
    link: "/projects/worky",
    image: workyScreenshot1,
  },
  {
    title: "Roamr",
    description: "An app that helps you find and share abandoned places.",
    link: "/projects/roamr",
    image: roamrScreenshot1,
  },
  {
    title: "Basseta",
    description: "A visual node-based audio editor.",
    link: "/projects/basseta",
    image: bassetaScreenshot1,
  },
];

function formateDate(date: Date): string {
  const day = String(date.getDay()).padStart(2, "0");
  const month = String(date.getMonth()).padStart(2, "0");
  const year = date.getFullYear();

  return `${day}-${month}-${year}`;
}
---

<BaseLayout>
  <div class="uppercase text-foreground">
    <section class="flex justify-between py-7">
      <h1>KENNETH QUINTERO</h1>
      <div class="flex gap-2">
        {
          social.map((item) => (
            <a href={item.link}>
              <span set:html={item.icon} />
            </a>
          ))
        }
      </div>
    </section>
    <hr class="hr-dashed" />
    <section class="py-7">
      <div class="flex items-center gap-2 border-l pl-3">
        <span class="font-extralight">01</span>
        <h2>THINGS I'M WORKING ON/THINGS I'VE BUILT</h2>
      </div>
      <div class="spacey-1 mt-4 font-extralight">
        {
          projects.map((item) => (
            <a
              href={item.link}
              class="block font-extralight hover:bg-foreground hover:text-background"
            >
              {item.title} - {item.description}
            </a>
          ))
        }
      </div>
    </section>
    <hr class="hr-dashed" />
    <section class="py-7">
      <div class="flex items-center gap-2 border-l pl-3">
        <span class="font-extralight">02</span>
        <h2 class="uppercase">Things I've wrote</h2>
      </div>
      <div class="mt-4 space-y-1 font-extralight">
        {
          posts.map(async (post) => (
            <a
              href={`/posts/${post.id}`}
              class="flex justify-between hover:bg-foreground hover:text-background"
            >
              <span>{post.data.title}</span>
              <span>{formateDate(post.data.pubDate)}</span>
            </a>
          ))
        }
      </div>
    </section>
    <!-- <div>
      <h2 class="bg-amber-900/15 px-2 text-xl">About me</h2>
      <hr />
      <div class="mt-4 flex items-center gap-6">
        <img
          src={profilePicture.src}
          alt="Profile Picture"
          class="h-32 w-32 rounded-full"
        />
        <div>
          <p class="text-md mt-1">
            Hi, I'm Kenneth and this is BetweenFrames, my personal website. Here
            you can find a list of projects I've worked on and some blog posts
            written by me. Feel free to take a look. If you want to get in
            touch, you can find me on the following platforms:
          </p>
          <div class="mt-4 flex flex-wrap gap-4 text-base">
            {
              social.map((item) => (
                <a href={item.link} class="flex items-center gap-2">
                  <i class={item.icon} />
                  {item.name}
                </a>
              ))
            }
          </div>
        </div>
      </div>
    </div>
    <div>
      <h2 class="bg-amber-900/15 px-2 text-xl">Projects</h2>
      <hr />
      <div class="mt-4 grid grid-cols-2 gap-5 md:grid-cols-3">
        {
          projects.map((project) => (
            <a href={project.link} class="block space-y-2">
              <Image
                src={project.image}
                alt={project.title}
                class="h-32 w-full rounded-lg border object-cover"
                style="user-drag: none;"
                width={375}
              />
              <h3 class="text-xl">{project.title}</h3>
              <p class="text-base">{project.description}</p>
            </a>
          ))
        }
      </div>
    </div>
    <div>
      <h2 class="bg-amber-900/15 px-2 text-xl">Blog</h2>
      <hr />
      <div class="mt-4 divide-y divide-stone-200">
        {
          posts.length === 0 ? (
            <p class="py-3 text-stone-500">
              No posts at the moment. Check back later!
            </p>
          ) : (
            posts.map(async (post) => (
              <div class="flex flex-col py-3 sm:flex-row sm:items-center sm:justify-between">
                <p class="order-1 text-sm text-stone-500 sm:order-2">
                  {getEnglishDate(new Date(post.data.pubDate))}
                </p>
                <a
                  href={`/posts/${post.id}`}
                  class="order-2 text-balance text-lg hover:underline sm:order-1"
                >
                  {post.data.title}
                </a>
              </div>
            ))
          )
        }
      </div>
    </div> -->
  </div>
</BaseLayout>
