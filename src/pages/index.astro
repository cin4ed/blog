---
import { getCollection } from "astro:content";

import BaseLayout from "@layouts/BaseLayout.astro";
import type { CollectionEntry } from "astro:content";

import emailIcon from "@assets/icons/mdi_email.svg?raw";
import linkedinIcon from "@assets/icons/mdi_linkedin.svg?raw";
import twitterIcon from "@assets/icons/mdi_twitter.svg?raw";
import githubIcon from "@assets/icons/mdi_github.svg?raw";

import { Picture } from "astro:assets";
import subberoImage from "@assets/images/test.png";

const posts: CollectionEntry<"blog">[] = await getCollection("blog");

posts.sort(
  (a, b) =>
    new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime(),
);

const social = [
  {
    name: "Email",
    link: "mailto:kenneth.quintero@betweenframes.net",
    icon: emailIcon,
  },
  {
    name: "LinkedIn",
    link: "https://www.linkedin.com/in/kenneth-de-guadalupe-quintero-valles-1971a12a8/",
    icon: linkedinIcon,
  },
  {
    name: "X",
    link: "https://x.com/cin4ed",
    icon: twitterIcon,
  },
  {
    name: "GitHub",
    link: "https://github.com/cin4ed",
    icon: githubIcon,
  },
];

const projects = [
  {
    title: "Subbero",
    description: "Subscription tracker",
    link: "https://subbero.vercel.app/",
  },
  {
    title: "Worky",
    description: "mac OS desktop organizer",
    link: "/projects/worky",
  },
  // {
  //   title: "Enf√°",
  //   description: "food delivery for my town",
  //   link: "/projects/enfa",
  // },
  // {
  //   title: "Roamr",
  //   description: "Find and share abandoned places",
  //   link: "/projects/roamr",
  // },
  // {
  //   title: "Basseta",
  //   description: "Create music with a node based editor",
  //   link: "/projects/basseta",
  // },
];

function formateDate(date: Date): string {
  const day = String(date.getDay()).padStart(2, "0");
  const month = String(date.getMonth()).padStart(2, "0");
  const year = date.getFullYear();

  return `${day}-${month}-${year}`;
}
---

<BaseLayout>
  <div class="space-y-7 uppercase text-foreground">
    <section class="flex justify-between">
      <h1>KENNETH QUINTERO</h1>
      <div class="social-icons flex gap-2">
        {
          social.map((item) => (
            <a href={item.link}>
              <span set:html={item.icon} />
            </a>
          ))
        }
      </div>
    </section>
    <hr class="hr-dashed" />
    <section>
      <div>
        <h2>ABOUT ME</h2>
      </div>
      <div class="mt-5 grid gap-4 sm:grid-cols-2">
        <p
          class="text-sm font-extralight leading-relaxed tracking-[0.08em] text-foreground/80 sm:col-span-2"
        >
          Software engineer. Trying stuff until it works.
        </p>
      </div>
    </section>
    <hr class="hr-dashed" />
    <section>
      <div class="flex items-end justify-between">
        <h2>PROJECTS</h2>
        <span
          class="text-xs font-extralight tracking-[0.2em] text-foreground/70"
        >
          SELECTED
        </span>
      </div>
      <div class="mt-5 grid gap-4 sm:grid-cols-2">
        {
          projects.map((item, index) => (
            <a
              href={item.link}
              class="group relative overflow-hidden border border-foreground/30 bg-foreground/5 p-4 transition hover:-translate-y-0.5 hover:border-foreground/70 hover:bg-foreground hover:text-background"
            >
              <div class="flex items-center justify-between">
                <span class="text-xs tracking-[0.35em] text-foreground/60 group-hover:text-background/80">
                  0{index + 1}
                </span>
                <span class="text-[10px] tracking-[0.3em] text-foreground/60 group-hover:text-background/80">
                  VIEW
                </span>
              </div>
              <div class="mt-4 text-base font-extralight tracking-[0.15em]">
                {item.title}
              </div>
              <div class="mt-2 text-xs font-extralight tracking-[0.2em] text-foreground/80 group-hover:text-background/90">
                {item.description}
              </div>
            </a>
          ))
        }
      </div>
    </section>
    <!-- <hr class="hr-dashed" /> -->
    <!-- <section>
      <h2 class="uppercase">BLOG</h2>
      <div class="mt-4 space-y-1 font-extralight">
        {
          posts.map(async (post) => (
            <a
              href={`/posts/${post.id}`}
              class="flex justify-between hover:bg-foreground hover:text-background"
            >
              <span>{post.data.title}</span>
              <span>{formateDate(post.data.pubDate)}</span>
            </a>
          ))
        }
      </div>
    </section> -->
  </div>
</BaseLayout>

<style>
  .pan-img {
    animation: pan 8s ease-in-out infinite alternate;
    object-position: 50% 20%;
  }

  @keyframes pan {
    from {
      object-position: 50% 20%;
    }
    to {
      object-position: 50% 80%;
    }
  }
</style>
